<div class="row" *ngIf="messageError">
    <div class="col-12">
        <nb-alert status="danger" class="container-fluid">
            <strong>Oh Dios!</strong> {{messageError}}
        </nb-alert>
    </div>
</div>
<ngx-breadcrumb [routes]="routes"></ngx-breadcrumb>

<div class="row">
    <div class="col-12">
        <nb-card class="nb-card-title">
            <div class="icon-container">
                <div class="icon status-warning">
                    <i class="nb-list"></i>
                </div>
            </div>
            <div class="details" *ngIf="institutionBS.educationalInstitutions[0]">
                <div class="title h5">{{institutionBS.educationalInstitutions[0].name}}</div>
                <div class="status paragraph-2">Centro:
                    {{institutionBS.educationalInstitutions[0].educational_institution.name}}
                </div>
                <div class="status paragraph-2">Depto:
                    {{institutionBS.educationalInstitutions[0].municipality.region.name}}
                </div>
                <div class="status paragraph-2">Lugar:
                    {{institutionBS.educationalInstitutions[0].municipality.name}}
                </div>
            </div>
        </nb-card>
    </div>
    <div class="col-12">
        <nb-card class="nb-card-padding">
            <small>Categoría</small>
            <nb-select placeholder="Categorías" (selectedChange)="FilterGroups($event)" fullWidth>
                <nb-option value="0">Todas</nb-option>
                <nb-option *ngFor="let course of courses" [value]="course.id">{{course.short_name}}
                </nb-option>
            </nb-select>
        </nb-card>
    </div>
    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4" *ngFor="let group of groups">
        <nb-card size="medium">
            <div class="picture picture-course"></div>
            <div class="details">
                <div class="h4">Grupo {{group.id}}</div>
                <small>Categoría:</small>
                <div class="description description-contents">
                    {{group.course.short_name}}
                </div>
                <br>
                <div class="target">
                    <!-- <a tabindex="1" (click)="openWindow(contentTemplate,group)">Aprendices</a> -->
                    <a
                        routerLink="../../../group/{{group.id}}/{{group.course.id}}/{{idInstitution}}/{{idParent}}">Aprendices</a>
                </div>
            </div>
        </nb-card>
    </div>
</div>
<ng-template #contentTemplate let-data>
    <nb-card size="tiny" accent="info">
        <nb-card-header>Aprendices</nb-card-header>
        <nb-list>
            <nb-list-item style="display: block; line-height: 0.25rem;" *ngFor="let user of data.group.users">
                <h6>{{user.user.firstname}}</h6>
            </nb-list-item>
        </nb-list>
    </nb-card>
</ng-template>