<ngx-base-list [messageError]="messageError" [routes]="routes">
  <div content>

    <ngx-base-table (propagar)="GetDataSelect($event)" [title]="title" [subtitle]="subtitle" [settings]="settings" [entity]="entity"
      customData="gloss" [messageToltip]="messageToltip">
      <div actions>
        <div class="actions">
          <nb-select style="margin-right: 5px;" (selectedChange)="ChangeGlossStatus($event)" placeholder="Filtrar por estado">
            <nb-option value="0">Todos los registros</nb-option>
            <nb-option *ngFor="let item of glossStatusF" [value]="item.id">{{item.name}}</nb-option>
        </nb-select>
          <form ngxCheckPerms="update">
            <div class="file-select" id="src-file1" [nbSpinner]="loading2">
              <input class="file" accept=".xlsm" type="file" id="file" file fullWidth (change)="saveFile($event)" />
            </div>
          </form>
          <button ngxCheckPerms="create" nbButton status="danger" (click)="NewGloss()">Crear</button>
        </div>
        <div class="actions" style="margin-top:1em;">
        </div>
      </div>
    </ngx-base-table>
    <button nbButton status="danger" class="btn-studen-admissions" (click)="ConfirmAction(confirmAction)"> Respuesta masiva </button>
  </div>
</ngx-base-list>
<ng-template #confirmAction>
  <div class="container-fluid">
      <nb-card style="width: 430px;">
          <nb-card-header>Responder Glosa</nb-card-header>
          <nb-card-body>
              <form [formGroup]="ResponseGlossForm" (ngSubmit)="saveGroup()">
                  <div>
                    <div class="col-md-12">
                      <label for="response" class="form-text text-muted font-weight-bold">Respuesta:</label>
                      <input nbInput fullWidth id="response" formControlName="response" response
                      status="{{ isSubmitted && ResponseGlossForm.controls.response.errors ? 'danger' : isSubmitted ? 'success' : '' }}" />
                    </div>
                      <div class="col-md-12">
                          <label for="accepted_value" class="form-text text-muted font-weight-bold">Valor aceptado:</label>
                          <input nbInput fullWidth id="accepted_value" formControlName="accepted_value" accepted_value
                              status="{{ isSubmitted && ResponseGlossForm.controls.accepted_value.errors ? 'danger' : isSubmitted ? 'success' : '' }}" />
                      </div>
                      <div class="col-md-12">
                          <label for="value_not_accepted" class="form-text text-muted font-weight-bold">Valor No aceptado:</label>
                          <input nbInput fullWidth id="value_not_accepted" formControlName="value_not_accepted"
                              value_not_accepted
                              status="{{ isSubmitted && ResponseGlossForm.controls.value_not_accepted.errors ? 'danger' : isSubmitted ? 'success' : '' }}" />
                      </div>
                      <div class="col-md-12">
                          <label for="objetion_code_response" class="form-text text-muted font-weight-bold">Descripción Respuesta:</label>
                          <nb-select fullWidth placeholder="Seleccione..."
                              formControlName="objetion_code_response_id">
                              <nb-option value="">Seleccione...</nb-option>
                              <nb-option *ngFor="let item of objetion_code_response" [value]="item.id">{{ item.code }} - {{ item.name }}
                              </nb-option>
                          </nb-select>
                      </div>
                      <div class="col-md-12">
                      <label for="objetion_response" class="form-text text-muted font-weight-bold">Tipo de objeción:</label>
                          <nb-select fullWidth placeholder="Seleccione..."
                              formControlName="objetion_response_id">
                              <nb-option value="">Seleccione...</nb-option>
                              <nb-option *ngFor="let item of objetion_response" [value]="item.id">{{ item.name }}
                              </nb-option>
                          </nb-select>
                      </div>
                      <div class="col-md-12">
                          <label for="observation" class="form-text text-muted font-weight-bold">Agregar Evicencias:</label>
                      </div>
                      <div class="file-select-evicencias" id="src-file1">
                        <input [nbSpinner]="loading" class="file" accept="image/*,.pdf" type="file" id="file" file fullWidth
                          (change)="changeFile($event,2)" />
                      </div>
                  </div>
                  <div class="div-send">
                      <button type="submit" nbButton status="success">Agregar</button>
                  </div>
              </form>
          </nb-card-body>
      </nb-card>
  </div>
</ng-template>