<ngx-base-reports
  [messageError]="messageError"
  [title]="title"
  [loading]="loading"
  [filters]="filters"
>
  <div filters *ngIf="!loading">
    <div class="row">

      <div class="col-sm-4">
        <div class="form-group">
          <label class="form-text text-muted font-weight-bold">
            Tipo de documento:
          </label>
          <ngx-autocomplete
            [options]="tipoDocumentos"
            [(inputModel)]="tipoDocumentoActual"
            value="ti_id"
            label="ti_nombre"
          >
          </ngx-autocomplete>
        </div>
      </div>

      <div class="col-sm-4">
        <div class="form-group">
          <label class="form-text text-muted font-weight-bold" for="numero_documento">
            Número de documento:
          </label>
          <input id="numero_documento" nbInput type="text" [(ngModel)]="identificacion">
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12 d-flex justify-content-center">
        <button nbButton [disabled]="!tipoDocumentoActual || !identificacion || loadingSearch"
                [nbSpinner]="loadingSearch" status="danger" (click)="Search()">
          <nb-icon icon="search-outline"></nb-icon>
          Buscar
        </button>
      </div>
    </div>

    <div class="row mt-2" *ngIf="notFound">
      <div class="col-sm-12">
        <div class="alert alert-warning" role="alert">
          {{ textNotFound }}
        </div>
      </div>
    </div>

    <div class="row mt-2" *ngIf="cursos.length">
      <div class="col-sm-12">

        <div class="alert alert-dark" role="alert">
          Información
        </div>

        <p>Nombres: {{ discente.nombres }} {{ discente.apellidos }}</p>
      </div>

      <div class="col-sm-12 mt-3">
        <table class="table">
          <thead>
          <tr>
            <th>Programa</th>
            <th>Subprograma</th>
            <th>Curso de formación</th>
            <th>Módulo</th>
            <th>Horas asistencia</th>
            <th>Certificado individual</th>
          </tr>
          </thead>

          <tbody>
            <tr *ngFor="let curso of cursos">
              <td>{{ curso.nomPrograma }}</td>
              <td>{{ curso.subPrograma }}</td>
              <td>{{ curso.nomCurso }}</td>
              <td>{{ curso.nomModulo }}</td>
              <td>{{ curso.totalHoras }}</td>
              <td>
                <button nbButton (click)="VerIndividualPDF(curso)" [disabled]="loadingDownload" [nbSpinner]="loadingDownload">Ver</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>

    <div class="row" *ngIf="cursos.length">
      <div class="col-sm-12">
        <div class="alert alert-info" role="alert">
          Señor usuario, si usted desea generar un único certificado de todos los cursos realizados, seleccione el botón 'Generar certificado' que se encuentra a continuación
        </div>
      </div>

      <div class="col-sm-12 d-flex justify-content-center">
        <button nbButton status="danger" (click)="generarConsolidado()" [disabled]="loadingDownload" [nbSpinner]="loadingDownload">
          Generar Certificados
        </button>
      </div>
    </div>

  </div>

</ngx-base-reports>
